"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[306],{6557:function(e,n,s){s.d(n,{Z:function(){return y}});s(2791);var r=s(9439),a=s(1087),t=s(6355),l=s(8241),i=s(3402),c=s(4165),o=s(1413),d=s(5861),u=s(3490),m=s(1243),h=s(7689),v=s(184),x=function(){var e=(0,u.R)(),n=(0,r.Z)(e,2),s=n[0],a=n[1],t=(0,h.s0)();function l(){return(l=(0,d.Z)((0,c.Z)().mark((function e(n){var r,l,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r=s.keyword,e.next=5,m.Z.get("/api/v1/product/search/".concat(r));case 5:l=e.sent,(i=null===l||void 0===l?void 0:l.data).success&&a((0,o.Z)((0,o.Z)({},s),{},{results:i.searchResults})),t("/search"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return(0,v.jsx)("div",{className:"main-search-input-wrap",children:(0,v.jsxs)("div",{className:"main-search-input",children:[(0,v.jsx)("div",{className:"main-search-input-item",children:(0,v.jsx)("input",{type:"text",placeholder:"Search Products...",value:s.keyword,onChange:function(e){return a((0,o.Z)((0,o.Z)({},s),{},{keyword:e.target.value}))}})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{className:"main-search-button",type:"button",onClick:function(e){return l.apply(this,arguments)},children:"Search"})})]})})},j=s(9126),p=s(4904),g=s(6224),f=s(8502),N=function(){var e,n,s=(0,l.a)(),c=(0,r.Z)(s,2),o=c[0],d=c[1],u=(0,g.j)(),m=(0,r.Z)(u,1)[0],h=(0,p.Z)();return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("nav",{className:"navbar navbar-expand-lg fixed-top nvbar",children:(0,v.jsxs)("div",{className:"container-fluid",children:[(0,v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,v.jsx)("span",{className:"navbar-toggler-icon"})}),(0,v.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01",children:[(0,v.jsxs)(a.rU,{to:"/",className:"navbar-brand d-flex align-items-center justify-content-center ",children:[(0,v.jsx)(t.Xfy,{className:"me-2 text-light fs-2"}),(0,v.jsxs)("span",{style:{color:"#fff",fontSize:"30px"},children:[(0,v.jsx)("b",{className:"s-word",children:"S"}),"-Mart"]})]}),(0,v.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:[(0,v.jsx)("li",{children:(0,v.jsx)(x,{})}),(0,v.jsx)("li",{className:"nav-item",children:(0,v.jsx)(a.OL,{to:"/",className:"nav-link",children:"Home"})}),(0,v.jsxs)("li",{className:"nav-item dropdown",children:[(0,v.jsx)(a.rU,{className:"nav-link dropdown-toggle",role:"button","data-bs-toggle":"dropdown",children:"Categories"}),(0,v.jsxs)("ul",{className:"dropdown-menu",style:{maxHeight:"280px",overflowY:"auto",whiteSpace:"nowrap"},children:[(0,v.jsx)(a.rU,{className:"dropdown-item",to:"/categories",children:"All Categories"}),(0,v.jsx)("li",{children:(0,v.jsx)("hr",{className:"dropdown-divider"})}),null===h||void 0===h?void 0:h.map((function(e){return(0,v.jsx)("li",{children:(0,v.jsx)(a.rU,{className:"dropdown-item",to:"/category/".concat(e.slug),children:null===e||void 0===e?void 0:e.name})},null===e||void 0===e?void 0:e._id)}))]})]}),o.user?(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("li",{className:"nav-item dropdown",children:[(0,v.jsx)(a.OL,{className:"nav-link dropdown-toggle",role:"button","data-bs-toggle":"dropdown",children:null===o||void 0===o||null===(e=o.user)||void 0===e?void 0:e.name}),(0,v.jsxs)("ul",{className:"dropdown-menu",children:[(0,v.jsx)("li",{children:(0,v.jsx)(a.OL,{to:"/dashboard/".concat(1===(null===o||void 0===o||null===(n=o.user)||void 0===n?void 0:n.role)?"admin":"user"),className:"dropdown-item",children:"Dashboard"})}),(0,v.jsx)("li",{children:(0,v.jsx)(a.OL,{to:"/login",className:"dropdown-item",onClick:function(){d({user:null,token:""}),localStorage.removeItem("auth"),i.Am.success("Logout successfully!!")},children:"LogOut"})})]})]})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("li",{className:"nav-item",children:(0,v.jsx)(a.OL,{to:"/register",className:"nav-link",children:"Register"})}),(0,v.jsx)("li",{className:"nav-item",children:(0,v.jsx)(a.OL,{to:"/login",className:"nav-link",children:"Login"})})]}),(0,v.jsx)("li",{className:"nav-item",children:(0,v.jsx)(a.OL,{to:"/cart",className:"nav-link",children:(0,v.jsx)("div",{className:"cart-icon",children:(0,v.jsx)(f.Z,{count:null===m||void 0===m?void 0:m.length,children:(0,v.jsx)(j.GPR,{style:{fontSize:"24px",color:"#fff"}})})})})})]})]})]})})})},b=function(){return(0,v.jsxs)("div",{className:"footer",children:[(0,v.jsx)("h4",{className:"text-center footer-title",children:"\xa9 Copyright 2020-2023 - S-MART. All rights reserved."}),(0,v.jsxs)("div",{className:"text-center footer-links",children:[(0,v.jsx)(a.rU,{to:"/about",className:"footer-link",children:"About"}),(0,v.jsx)("span",{className:"footer-link-divider",children:"|"}),(0,v.jsx)(a.rU,{to:"/contact",className:"footer-link",children:"Contact"}),(0,v.jsx)("span",{className:"footer-link-divider",children:"|"}),(0,v.jsx)(a.rU,{to:"/policy",className:"footer-link",children:"Policy"})]})]})},w=s(6907),k=function(e){var n=e.children,s=e.title,r=e.description,a=e.keywords,t=e.author;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(w.B6,{children:[(0,v.jsxs)(w.ql,{children:[(0,v.jsx)("meta",{name:"description",content:r}),(0,v.jsx)("meta",{name:"keywords",content:a}),(0,v.jsx)("meta",{name:"author",content:t}),(0,v.jsx)("title",{children:s})]}),(0,v.jsx)(N,{}),(0,v.jsx)("main",{style:{marginTop:"85px",minHeight:"80vh"},children:n}),(0,v.jsx)(b,{})]})})};k.defaultProps={title:"Ecommerce app - S-Mart",description:"Ecommerce Mern project",keywords:"mern,react,node,express,mongodb,ecommerce",author:"Prashant Y"};var y=k},4904:function(e,n,s){s.d(n,{Z:function(){return c}});var r=s(4165),a=s(5861),t=s(9439),l=s(2791),i=s(1243);function c(){var e=(0,l.useState)([]),n=(0,t.Z)(e,2),s=n[0],c=n[1],o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/v1/category/get-category");case 3:n=e.sent,null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s&&s.success&&c(null===s||void 0===s?void 0:s.category),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error while getting categories");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){o()}),[]),s}},1306:function(e,n,s){s.r(n);var r=s(3433),a=s(9439),t=s(2791),l=s(6557),i=s(6224),c=s(8241),o=s(7689),d=s(1087),u=s(3010),m=s(8820),h=s(1243),v=s(3402),x=s(184);n.default=function(){var e,n,s,j,p=(0,i.j)(),g=(0,a.Z)(p,2),f=g[0],N=g[1],b=(0,c.a)(),w=(0,a.Z)(b,1)[0],k=(0,t.useState)(!1),y=(0,a.Z)(k,2),Z=y[0],S=y[1],C=(0,o.s0)();return(0,x.jsx)(l.Z,{title:"Cart - S-Mart",children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)("div",{className:"col-md-12",children:[(0,x.jsx)("h1",{className:"text-center bg-light p-2 mb-2",children:"Hello ".concat((null===w||void 0===w?void 0:w.token)&&(null===w||void 0===w||null===(e=w.user)||void 0===e?void 0:e.name))}),(0,x.jsx)("h4",{className:"text-center",children:(null===f||void 0===f?void 0:f.length)>0?(0,x.jsxs)(x.Fragment,{children:["You have ",null===f||void 0===f?void 0:f.length," ",1===(null===f||void 0===f?void 0:f.length)?"item":"items"," in your cart"," ",null!==w&&void 0!==w&&w.token?null:(0,x.jsx)(x.Fragment,{children:"Please Login to check out!!"})]}):"Your cart is empty right now. Please add some items"})]})}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-8",children:null===f||void 0===f?void 0:f.map((function(e){return(0,x.jsxs)("div",{className:"row mb-3 p-3 card flex-row",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("img",{src:"/api/v1/product/product-image/".concat(e._id),className:"card-img-top",alt:e.name,style:{height:"180px",width:"180px",objectFit:"contain"}})}),(0,x.jsxs)("div",{className:"col-md-8",children:[(0,x.jsx)("h3",{children:e.name}),(0,x.jsxs)("p",{children:[e.description.substring(0,100),"....."]}),(0,x.jsxs)("p",{className:"fw-bold",children:["Price: \u20b9",e.price]}),(0,x.jsx)("button",{className:"btn btn-danger",onClick:function(){return function(e){try{var n=(0,r.Z)(f),s=n.findIndex((function(n){return n._id===e}));n.splice(s,1),N(n),localStorage.setItem("cart",JSON.stringify(n))}catch(a){console.log("Error***",a)}}(e._id)},children:"Remove"})]})]},e._id)}))}),(0,x.jsxs)("div",{className:"col-md-4 text-center",children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("h2",{children:"Cart Summary"}),(0,x.jsx)("hr",{}),(0,x.jsxs)("h4",{children:["Total: ",function(){var e=f.reduce((function(e,n){return e+n.price}),0);return e.toLocaleString("en-IN",{style:"currency",currency:"INR"})}()]})]}),null!==w&&void 0!==w&&null!==(n=w.user)&&void 0!==n&&n.address?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("p",{className:"fs-5",children:"Current Address : "}),(0,x.jsx)("p",{children:null===w||void 0===w||null===(s=w.user)||void 0===s?void 0:s.address}),(0,x.jsx)(d.rU,{to:"/dashboard/user/profile",className:"btn btn-outline-warning",children:"Update Address"})]})}):(0,x.jsx)("div",{className:"mb-4",children:null!==w&&void 0!==w&&w.token?(0,x.jsx)(d.rU,{to:"/dashboard/user/profile",className:"btn btn-outline-warning",children:"Update Address"}):(0,x.jsx)(d.rU,{to:"/login",className:"btn btn-outline-warning",state:"/cart",children:"Please Login to Checkout"})}),(0,x.jsx)("button",{className:"btn btn-outline-dark",style:{width:"auto",letterSpacing:"2px"},onClick:function(){S(!0);var e=new Promise((function(e,n){setTimeout((function(){h.Z.post("/api/v1/product/cart-checkout",{cart:f}).then((function(n){var s=null===n||void 0===n?void 0:n.data;s.success&&(C("/dashboard/user/orders"),N([]),localStorage.removeItem("cart")),S(!1),e(s)})).catch((function(e){401===e.response.status&&(v.Am.error("Ooops\ud83e\udee2\ud83e\udee2 Token got expired. Please login again."),C("/login")),console.log("ERROR",e),S(!1),n(e)}))}),3e3)}));return v.Am.promise(e,{loading:"Placing Your Order...Please wait",success:"Order Placed Successfully!!",error:"Could not place the order."})},disabled:Z||!(null!==w&&void 0!==w&&null!==(j=w.user)&&void 0!==j&&j.address)||!f.length,children:Z?(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)(u.lu,{size:17}),(0,x.jsx)("p",{className:"mb-0 ms-2",children:"Processing Request..."})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Lk_,{size:20})," Checkout"]})})]})]})]})})}}}]);
//# sourceMappingURL=306.0402d19c.chunk.js.map